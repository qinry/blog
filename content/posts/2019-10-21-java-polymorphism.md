---
title: "《Thinking in Java》-- 多态"
date: 2019-10-21T17:01:44+08:00
tags: [ "java"]
---

# 多态

## 多态的作用
* 消除类型间的耦合关系
* 改善代码的组织结构和可读性，还能够创建可扩展程序

## 绑定
将一个方法调用同一个方法主体关联起来称为绑定。若在程序执行前进行绑定，叫做**前期绑定**；而在运行时根据对象的类型进行绑定，叫**后期绑定**。有了后期绑定，多态的特性才能够呈现，编译器无法知道对象类型，只能通过安置类型信息来鉴别，这就要程序运行时方法调用基于类型信息匹配正确的方法主体。Java除了final方法和static方法外，都是后期绑定。

* 注：域和静态方法不支持多态；覆盖private（隐式final）方法，虽然编译器不报错，但是不要这么做，会出现混淆。（之前第七章有提过）

## 构造器内部的多态方法行为
初始化（此处未考虑基类构造器调用之前基类静态成员和基类非静态成员的指定初始化）

1. 分配给对象的存储空间初始化为二进制的0(某些特殊类型中与0等价的值)
2. 调用基类的构造器
3. 按声明顺序调用成员初始化。
4. 调用导出类构造器主体

* 注：避免在构造器调用其他类内方法，唯一安全的方法是基类的final方法

## 向下转型
用圆括号里面放入你想转换的类型，Java会自动做类型检查和转换。如: ```(type)object```。有误会报错。

## 协变类型
表示导出类的被覆盖方法可以返回基类方法的返回类型的某个导出类。